<link rel="stylesheet" type="text/css" href="/node_modules/@fyn-software/suite/css/style.css">

<style>
    :host {
        display: grid;
        grid: auto 1fr / 1fr;
        grid-gap: 1em;
    }

    :host > toolbar {
        display: grid;
        grid-auto-flow: column;
        grid-gap: 1em;
        justify-content: space-between;
        z-index: 2;
        padding: .5em;
        background-color: #fff1;
    }

    :host > toolbar > fyn-common-graphics-image {
        width: 3em;
        height: 3em;
    }

    :host > toolbar > [user] span {
        white-space: nowrap;
    }

    fyn-common-layout-list {
        grid-gap: .5em;
    }

    fyn-common-graphics-image[participant] {
        --img-radius: 50%;
        width: 2.5em;
        height: 2.5em;
    }

    fyn-common-graphics-icon[stat] {
        width: 2.5em;
        padding: .5em 0;
        background-color: var(--bg, var(--info));
        border-radius: 50%;
    }

    fyn-common-graphics-icon[stat] span {
        position: absolute;
        right: -.25em;
        bottom: -.25em;
        width: 1.5em;
        height: 1.5em;
        line-height: 1.5em;
        font-size: .75em;
        text-align: center;
        background-color: #222;
        border-radius: 50%;
    }

    fyn-common-form-button[fab] {
        position: absolute;
        right: 2em;
        bottom: 2em;
    }

    fyn-common-overlay-dialog[settings] eventprikker-settings {
        margin-top: -2.25em;
        backdrop-filter: blur(3px);
    }

    @media (max-width: 768px) {
        :host {
            /*align-self: center;*/
            /*justify-self: center;*/
            overflow: hidden;
        }

        table {
            display: block;
            overflow: hidden;
        }

        table thead {
            display: none;
        }

        table tbody {
            overflow-y: auto;
            height: 100%;
        }

        table tbody,
        table tbody tr {
            display: grid;
            grid-gap: 1em;
            padding: 1em;
        }

        table tbody tr {
            position: relative;
            grid-template-columns: repeat(2, 1fr);
            background-color: #fff1;
            backdrop-filter: blur(5px);
            border-radius: var(--radius);
        }

        table tbody tr td {
            padding: 0;
        }


        table tbody tr td:nth-child(1),
        table tbody tr td:nth-child(4),
        table tbody tr td:nth-child(5) {
            grid-column: span 2;
        }


        table tbody tr td:nth-child(1) {
            font-size: 2em;
        }

        fyn-common-overlay-dialog {
            width: 100vw;
            height: 100vh;
            top: auto;
            left: 0;
            bottom: 0;
            --translation: 0;
            box-shadow: none;
        }
    }
</style>

<toolbar>
    <fyn-common-graphics-image src="/img/logo.png" logo></fyn-common-graphics-image>

    <fyn-common-form-button multi flat user>
        <fyn-common-graphics-image
            src="{{ user.img }}"
            participant
        ></fyn-common-graphics-image>

        <span slot="options" action="settings">Settings</span>

        <span slot="options" action="logout">Logout</span>
    </fyn-common-form-button>
</toolbar>

<table striped>
    <thead>
        <tr>
            <th>Activity</th>

            <th>Start</th>

            <th>End</th>

            <th>Link</th>

            <th>Participants</th>
        </tr>
    </thead>

    <tbody for="{{ activity in activities }}">
        <tr>
            <td>{{ activity.name }}</td>

            <td>{{ activity.start }}</td>

            <td>{{ activity.end }}</td>

            <td>
                <a href="{{ activity.link }}" target="_blank" rel="noopener nofollow">{{ activity.link }}</a>
            </td>

            <td>
                <fyn-common-layout-list for="{{ stat in activity.stats }}" horizontal>
                    <fyn-common-graphics-icon
                            stat
                            icons="{{ stat.icon }}"
                            tooltip="{{ stat.text }}"
                            style="--bg: {{ stat.color }}"
                    >
                        <span>{{ stat.count }}</span>
                    </fyn-common-graphics-icon>
                </fyn-common-layout-list>
            </td>
        </tr>
    </tbody>
</table>

<fyn-common-form-button fab icons="plus"></fyn-common-form-button>

<fyn-common-overlay-dialog new img="/img/banner.jpg" title="New activity">
    <fyn-common-form-form>
        <fyn-common-form-input label="Name"></fyn-common-form-input>

        <fyn-common-form-datetime label="Start"></fyn-common-form-datetime>

        <fyn-common-form-datetime label="End"></fyn-common-form-datetime>

        <fyn-common-form-button role="submit" slot="buttons" primary>Submit</fyn-common-form-button>

        <fyn-common-form-button role="cancel" slot="buttons" flat>Close</fyn-common-form-button>
    </fyn-common-form-form>
</fyn-common-overlay-dialog>

<fyn-common-overlay-dialog settings img="/img/banner.jpg" title="Settings">
    <eventprikker-settings></eventprikker-settings>

    <fyn-common-form-button action="close" slot="footer" flat>Close</fyn-common-form-button>
</fyn-common-overlay-dialog>